* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Times New Roman", serif;
}

/* ‚úÖ Mobile: gradients l√©gers */
body {
  background:
    radial-gradient(circle at 18% 85%, rgba(0, 255, 120, 0.28), rgba(0, 255, 200, 0) 55%),
    radial-gradient(circle at 85% 15%, rgba(0, 255, 170, 0.22), rgba(0, 255, 200, 0) 55%),
    #000;
  overflow: hidden;
  /* Optimisation globale */
  background-color: #000;
}

.stage {
  position: relative;
  min-height: 100svh;
  display: grid;
  place-items: center;
  perspective: 1200px;
  isolation: isolate;
}

.ambient-light,
.ambient-light-top-right {
  display: none;
}

/* ‚úÖ Desktop: Optimisation Rendering */
@media (hover: hover) and (pointer: fine) {
  body { background: #000; }
  
  .ambient-light,
  .ambient-light-top-right {
    display: block;
    pointer-events: none;
    z-index: 0;
    will-change: transform; 
    /* Force le GPU layer sans flou co√ªteux ici */
    position: fixed;
  }

  /* üõ† OPTIMISATION MAJEURE : "The Scale Trick"
     On r√©duit la taille physique (width/height) et on r√©duit le rayon du blur.
     Ensuite, on utilise transform: scale() pour remettre √† la taille visuelle.
     Cela r√©duit la charge GPU de 90%.
  */

  .ambient-light {
    bottom: -22vh; /* Ajust√© pour l'√©chelle */
    left: -10vw;   /* Ajust√© pour l'√©chelle */
    width: 60vw;   /* Divis√© par ~4 */
    height: 60vw;  /* Divis√© par ~4 */
    background: radial-gradient(
      circle,
      rgba(0, 255, 120, 0.65) 0%,
      rgba(0, 255, 170, 0.10) 10%,
      rgba(0, 255, 200, 0) 80%
    );
    /* Blur r√©duit (220px / 4 = 55px) */
    filter: blur(55px); 
    /* On agrandit x4 pour retrouver la taille d'origine */
    transform: scale(4) translateZ(0); 
    opacity: 0.8; /* L√©g√®re correction d'intensit√© due au scale */
  }

  .ambient-light-top-right {
    top: -28vh;
    right: -15vw;
    width: 55vw;
    height: 58vw;
    background:
      radial-gradient(
        ellipse at 65% 35%,
        rgba(0, 255, 170, 0.55) 0%,
        rgba(0, 255, 120, 0.14) 18%,
        rgba(0, 255, 200, 0) 72%
      ),
      radial-gradient(
        circle at 35% 65%,
        rgba(120, 255, 210, 0.22) 0%,
        rgba(0, 255, 200, 0) 60%
      );
    filter: blur(60px); /* 240px / 4 */
    /* On combine le scale x4 avec la rotation existante */
    transform: scale(4) rotate(16deg) translateZ(0);
    opacity: 0.95;
  }
}

.card-stack {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: clamp(14px, 2.2vh, 22px);
  z-index: 2;
  /* √âvite que le texte ne force des recalculs de layout */
  transform: translateZ(0);
}

@media (hover: hover) and (pointer: fine) {
  .card-stack {
    gap: clamp(35px, 0.9vh, 12px);
    transform: translateY(clamp(-22px, -2.6vh, -12px)) translateZ(0);
  }
}

@media (max-width: 480px) {
  .glitch-text {
    font-size: calc(clamp(14px, 3.2vw, 42px) * 1.3);
  }
}

.tilt-area {
  padding: clamp(16px, 4vw, 56px);
  display: grid;
  place-items: center;
  cursor: pointer;
  z-index: 2;
  touch-action: none;
}

@media (hover: hover) and (pointer: fine) {
  .tilt-area {
    padding: clamp(40px, 8vw, 160px);
  }
}

.card-container {
  width: clamp(280px, 60vw, 520px);
  aspect-ratio: 520 / 325;
  position: relative;
  transform-style: preserve-3d;
  -webkit-transform-style: preserve-3d;
  cursor: pointer;
  z-index: 2;
  /* Ombre optimis√©e : moins de spread pour performance */
  box-shadow:
    0 0 12px rgba(255,255,255,0.14),
    0 20px 45px rgba(0,0,0,0.72);
  will-change: transform;
  transform: perspective(1200px) rotateX(0deg) rotateY(0deg) translateZ(0);
  /* contain: paint layout; Retir√© car peut couper les effets 3D sur certains navigateurs */
  border-radius: 16px;
  background-color: #000; /* Fond noir par d√©faut pour √©viter la transparence co√ªteuse */
}

@media (max-width: 480px) {
  .card-container {
    border-radius: 6px;
  }
}

@media (pointer: coarse) {
  .card-container { transition: none; }
}

@media (hover: hover) and (pointer: fine) {
  .card-container { transition: transform 0.10s ease-out; }
}

.card-face {
  position: absolute;
  inset: 0;
  overflow: hidden;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  border-radius: inherit; /* Assure que le border-radius suit */
}

.card-front {
  background-image: url("../assets/americanexpress.webp");
  background-size: cover;
  background-position: center;
  transform-style: preserve-3d;
  -webkit-transform-style: preserve-3d;
  background-color: #1a1a1a; 
}

@supports (background-image: image-set(url("x.webp") type("image/webp"))) {
  .card-front {
    background-image: image-set(
      url("../assets/americanexpress.webp") type("image/webp")
    );
  }
}

.reflection {
  position: absolute;
  inset: 0;
  border-radius: 18px;
  pointer-events: none;
  transform: translateZ(1px); 
  --px: 50%;
  --py: 50%;
  opacity: 0.35;
  background: radial-gradient(circle at var(--px) var(--py), rgba(255,255,255,0.22), rgba(255,255,255,0) 58%);
  /* Optimisation: on pr√©vient le navigateur que le background change */
  will-change: background; 
}

@media (hover: hover) and (pointer: fine) {
  .reflection {
    opacity: 0.50;
    mix-blend-mode: overlay; /* 'screen' peut √™tre lourd, overlay est souvent mieux g√©r√© sur fond sombre */
    background:
      radial-gradient(
        circle at var(--px) var(--py),
        rgba(255,255,255,0.42),
        rgba(255,255,255,0.14) 30%,
        rgba(255,255,255,0) 60%
      ),
      linear-gradient(120deg, rgba(255,255,255,0.10), rgba(255,255,255,0) 60%);
  }
}

.shine {
  position: absolute;
  inset: 0;
  border-radius: 18px;
  background: linear-gradient(120deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.06) 25%, rgba(255,255,255,0.14) 35%, rgba(255,255,255,0) 50%);
  transform: translateX(-120%);
  pointer-events: none;
  opacity: 0.9;
  z-index: 3;
}

@media (prefers-reduced-motion: no-preference) {
  .shine { animation: shine 12s infinite; }
}

@media (prefers-reduced-motion: reduce) {
  .shine { animation: none; opacity: 0.25; }
}

@keyframes shine {
  0% { transform: translateX(-120%) translateZ(2px); }
  30%, 100% { transform: translateX(120%) translateZ(2px); }
}

.glitch-text {
  color: #b8fffb;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: clamp(16px, 3.2vw, 42px);
  letter-spacing: .22em;
  text-shadow: 0 0 18px rgba(43,255,243,.22);
  user-select: none;
  white-space: nowrap;
  position: relative;
  line-height: 1;
  pointer-events: all;
  max-width: 100%;
  overflow: hidden;
  text-overflow: clip;
  cursor: pointer;
  /* Optimisation texte */
  transform: translateZ(0);
}

@media (max-width: 480px) {
  .glitch-text {
    font-size: calc(clamp(20px, 3.2vw, 42px) * 1.3);
  }
}

.glitch-text::before,
.glitch-text::after {
  content: attr(data-text);
  position: absolute;
  inset: 0;
  opacity: .75;
  pointer-events: none;
}

.glitch-text::before { color: #2bfff3; transform: translate(2px,0); }
.glitch-text::after { color: #ff2bd6; transform: translate(-2px,0); }

@media (hover: hover) and (pointer: fine) {
  .tilt-area {
    --pad: clamp(40px, 8vw, 160px);
    padding: var(--pad);
    margin-bottom: calc(-1 * (var(--pad) - 10px));
  }
  #screen {
    position: relative;
    z-index: 5;
  }
}